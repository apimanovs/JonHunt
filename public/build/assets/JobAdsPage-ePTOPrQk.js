import{Q as V,e as U,T as w,o as a,d as n,a as h,u as i,w as _,F as p,Z as B,b as e,t as l,f as m,h as g,r as E,j as v,q as y,k as R,g as F,O as x}from"./app--gSEcGom.js";import{_ as I}from"./AuthenticatedLayout-3_nkEi-e.js";import{P as k}from"./PrimaryButton-_0cu5cjj.js";import{_ as A}from"./InputError--H0hBPEQ.js";import"./ApplicationLogo-G7dBEAp6.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const N={class:"my-10 max-w-4xl mx-auto bg-white dark:bg-gray-800 shadow sm:rounded-lg p-6 sm:p-8"},z={class:"my-10 max-w-4xl mx-auto bg-white dark:bg-gray-800 shadow sm:rounded-lg p-6 sm:p-8"},J={class:"text-2xl font-semibold text-gray-900 overflow-hidden text-ellipsis"},O={class:"creator-info flex items-center mt-2"},q=["href"],L=["src"],Q=["href"],Z={class:"w-10 h-10 rounded-full bg-gray-400 text-white font-bold flex items-center justify-center mr-3"},G=["href"],H={key:0,class:"badge badge-accent ml-2"},K=e("br",null,null,-1),W={class:"mt-2"},X=e("h3",{class:"text-xl font-semibold text-gray-900 overflow-hidden text-ellipsis whitespace-nowrap"}," Details ",-1),Y=e("strong",null,"Price:",-1),ee=e("strong",null,"Posted:",-1),te=e("strong",null,"Creator:",-1),se=e("br",null,null,-1),oe={class:"mt-2 text-lg text-gray-800 font-medium overflow-hidden text-ellipsis"},ie=e("h3",{class:"text-xl font-semibold text-gray-900 my-2.5"},"Average Rating",-1),ae={key:0,class:"text-lg text-gray-800 font-medium"},ne={class:"mt-6"},le=e("h3",{class:"text-xl font-semibold text-gray-900"},"Reviews",-1),re={key:0,class:"mt-2 text-sm text-gray-600"},de={class:"mt-4 space-y-4"},ce={key:0},ue=e("label",{for:"editRating",class:"block text-sm font-medium"},"Rating",-1),me=e("option",{value:"1"},"1",-1),he=e("option",{value:"2"},"2",-1),ge=e("option",{value:"3"},"3",-1),be=e("option",{value:"4"},"4",-1),ve=e("option",{value:"5"},"5",-1),xe=[me,he,ge,be,ve],_e=e("label",{for:"editReviewText",class:"block text-sm font-medium"},"Review",-1),fe={class:"mt-2"},we={key:1},pe={class:"text-gray-900"},ye={class:"text-sm text-gray-600"},Re={key:0},ke={class:"dropdown relative inline-block text-left"},Ae=e("button",{tabindex:"0",role:"button",class:"flex items-center p-1 rounded-full hover:bg-gray-200 transition duration-150 ease-in-out"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"h-3 w-6 stroke-current text-gray-600"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})])],-1),je={tabindex:"0",class:"dropdown-content absolute mt-2 w-40 menu bg-base-100 rounded-md shadow-lg p-1 z-10"},Te=["onClick"],$e=["onClick"],De={class:"mt-6"},Ce=e("h3",{class:"text-xl font-semibold text-gray-900"},"Add a Review",-1),Me=e("label",{for:"rating",class:"block text-sm font-medium"},"Rating",-1),Pe=e("option",{disabled:"",selected:""},"Choose rating for this job ad",-1),Se=e("option",{value:"1"},"1",-1),Ve=e("option",{value:"2"},"2",-1),Ue=e("option",{value:"3"},"3",-1),Be=e("option",{value:"4"},"4",-1),Ee=e("option",{value:"5"},"5",-1),Fe=[Pe,Se,Ve,Ue,Be,Ee],Ie=e("label",{for:"ReviewText",class:"block text-sm font-medium"},"Review",-1),Ne={key:0,class:"text-red-600 mb-4"},ze={key:1,class:"text-red-600 mb-4"},Ge={__name:"JobAdsPage",props:{jobAds:Object,averageRating:{type:String,default:""}},setup(t){const{props:j}=V(),{auth:f}=j,b=t;console.log(b.jobAds);const T=U(()=>{const r=new Date(b.jobAds.created_at),o=Math.abs(new Date-r),u=Math.floor(o/(1e3*60*60*24));return u===0?"Today":u===1?"1 day ago":`${u} days ago`}),$=()=>{x.visit(`/jobs/${b.jobAds.id}/apply`)},c=w({Rating:"",ReviewText:""}),s=w({Rating:"",ReviewText:"",id:null}),D=()=>{c.post(route("jobAds.addReview",b.jobAds.id),{onSuccess:()=>{c.reset(),x.reload({only:["jobAds.reviews","averageRating"]})}})},C=r=>{confirm("Are you sure you want to delete this review?")&&c.delete(`/reviews/${r.ReviewID}`,{onSuccess:()=>{x.reload({only:["jobAds.reviews","averageRating"]})},onError:d=>{console.log("Error deleting review:",d)}})},M=()=>{s.reset(),s.id=null},P=r=>{s.id=r.ReviewID,s.Rating=r.Rating,s.ReviewText=r.ReviewText},S=()=>{s.post(`/reviews/${s.id}/edit`,{onSuccess:()=>{s.reset(),s.id=null,x.reload({only:["jobAds.reviews","averageRating"]})}})};return(r,d)=>(a(),n(p,null,[h(i(B),{title:"Job Ad Information"}),h(I,null,{default:_(()=>[e("div",N,[e("div",z,[e("h2",J,l(t.jobAds.Title),1),e("div",O,[t.jobAds.creator&&t.jobAds.creator.avatar?(a(),n("a",{key:0,href:`/user/${t.jobAds.creator.username}`,class:"flex items-center"},[e("img",{src:t.jobAds.creator.avatar.photo_url,alt:"Avatar",class:"w-10 h-10 rounded-full mr-3"},null,8,L)],8,q)):(a(),n("a",{key:1,href:`/user/${t.jobAds.creator.username}`,class:"flex items-center"},[e("div",Z,l(t.jobAds.creator.name.charAt(0).toUpperCase()),1)],8,Q)),e("a",{href:`/user/${t.jobAds.creator.username}`,class:"text-gray-700 font-medium hover:text-blue-500 transition flex items-center"},[m(l(t.jobAds.creator.name)+" ",1),t.jobAds.creator.role==="freelancer"?(a(),n("span",H," Freelancer ")):g("",!0)],8,G)]),K,e("div",W,[X,e("p",null,[Y,m(" $"+l(t.jobAds.Price),1)]),e("p",null,[ee,m(" "+l(T.value),1)]),e("p",null,[te,m(" "+l(t.jobAds.creator.name),1)])]),se,e("p",oe,l(t.jobAds.Description),1),e("div",{class:"mt-6 flex justify-between items-center"},[e("button",{onClick:$,class:"btn bg-blue-600 text-white hover:bg-blue-700"}," Apply for Job ")])]),ie,t.jobAds.reviews.length>0?(a(),n("p",ae,l(t.averageRating),1)):g("",!0),e("div",ne,[le,t.jobAds.reviews.length===0?(a(),n("div",re," No reviews yet. ")):g("",!0),e("ul",de,[(a(!0),n(p,null,E(t.jobAds.reviews,o=>(a(),n("li",{key:o.ReviewID,class:"border-b border-gray-200 pb-4"},[i(s).id===o.ReviewID?(a(),n("div",ce,[e("div",null,[ue,v(e("select",{id:"editRating","onUpdate:modelValue":d[0]||(d[0]=u=>i(s).Rating=u),class:"mt-1 block w-full"},xe,512),[[y,i(s).Rating]])]),e("div",null,[_e,v(e("textarea",{id:"editReviewText","onUpdate:modelValue":d[1]||(d[1]=u=>i(s).ReviewText=u),class:"mt-1 block w-full"},null,512),[[R,i(s).ReviewText]]),h(A,{class:"mt-2",message:i(c).errors.ReviewText},null,8,["message"])]),e("div",fe,[h(k,{onClick:S,class:"bg-blue-600 text-white"},{default:_(()=>[m(" Update Review ")]),_:1}),e("button",{onClick:M,class:"text-red-600 hover:text-red-800 ml-2"}," Cancel ")])])):(a(),n("div",we,[e("p",pe,l(o.ReviewText),1),e("p",ye,[m(l(o.user.name)+" (Rating: "+l(o.Rating)+") ",1),i(f).user&&o.user.id===i(f).user.id?(a(),n("span",Re,[e("div",ke,[Ae,e("ul",je,[e("li",null,[e("button",{onClick:u=>P(o),class:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-200 hover:text-blue-600 transition duration-150 ease-in-out text-left"}," Edit ",8,Te)]),e("li",null,[e("button",{onClick:u=>C(o),class:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-200 hover:text-red-600 transition duration-150 ease-in-out text-left"}," Delete ",8,$e)])])])])):g("",!0)])]))]))),128))])]),e("div",De,[Ce,e("form",{onSubmit:F(D,["prevent"]),class:"space-y-4"},[e("div",null,[Me,v(e("select",{id:"rating","onUpdate:modelValue":d[2]||(d[2]=o=>i(c).Rating=o),class:"select select-bordered mt-1 block w-full"},Fe,512),[[y,i(c).Rating]])]),e("div",null,[Ie,v(e("textarea",{id:"ReviewText","onUpdate:modelValue":d[3]||(d[3]=o=>i(c).ReviewText=o),class:"textarea textarea-bordered mt-1 block w-full"},null,512),[[R,i(c).ReviewText]])]),r.$page.props.errors.error?(a(),n("div",Ne,l(r.$page.props.errors.error),1)):g("",!0),r.$page.props.errors.Rating?(a(),n("div",ze,l(r.$page.props.errors.Rating),1)):g("",!0),h(k,{type:"submit",class:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-md"},{default:_(()=>[m(" Post a review ")]),_:1}),h(A,{class:"mt-2",message:i(c).errors.ReviewText},null,8,["message"])],32)])])]),_:1})],64))}};export{Ge as default};
